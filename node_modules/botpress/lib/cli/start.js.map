{"version":3,"sources":["../../src/cli/start.js"],"names":["module","exports","projectPath","options","Botpress","resolve","require","join","err","print","message","stack","process","exit","botfile","existsSync","bold","bot","start"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA;;;;;;;;;AASAA,OAAOC,OAAP,GAAiB,UAASC,WAAT,EAAsBC,OAAtB,EAA+B;AAC9C,MAAIC,WAAW,IAAf;;AAEA,MAAI,CAACF,WAAD,IAAgB,OAAOA,WAAP,KAAwB,QAA5C,EAAsD;AACpDA,kBAAc,GAAd;AACD;;AAEDA,gBAAc,eAAKG,OAAL,CAAaH,WAAb,CAAd;;AAEA,MAAI;AACFE,eAAWE,QAAQ,eAAKC,IAAL,CAAUL,WAAV,EAAuB,cAAvB,EAAuC,UAAvC,CAAR,EAA4DE,QAAvE;AACD,GAFD,CAEE,OAAOI,GAAP,EAAY;AACZ,mBAAKC,KAAL,CAAW,OAAX,EAAoBD,IAAIE,OAAxB;AACA,mBAAKD,KAAL,CAAW,OAAX,EAAoBD,IAAIG,KAAxB;AACA,mBAAKF,KAAL,CAAW,OAAX,EAAoB,sDAApB;AACA,mBAAKA,KAAL,CAAW,4EAAX;AACA,mBAAKA,KAAL,CAAW,2EAAX;AACA,mBAAKA,KAAL,CAAW,eAAX;AACA,mBAAKA,KAAL,CAAW,kEACT,iFADF;AAEAG,YAAQC,IAAR,CAAa,CAAb;AACD;;AAED,MAAMC,UAAU,eAAKP,IAAL,CAAUL,WAAV,EAAuB,YAAvB,CAAhB;AACA,MAAI,CAAC,aAAGa,UAAH,CAAcD,OAAd,CAAL,EAA6B;AAC3B,mBAAKL,KAAL,CAAW,OAAX,EAAoB,gBAAc,gBAAMO,IAAN,CAAW,YAAX,CAAd,wBAA2DF,OAA/E;AACAF,YAAQC,IAAR,CAAa,CAAb;AACD;;AAED,MAAMI,MAAM,IAAIb,QAAJ,CAAa,EAAEU,gBAAF,EAAb,CAAZ;AACAG,MAAIC,KAAJ;AACD,CA/BD","file":"start.js","sourcesContent":["import path from 'path'\nimport fs from 'fs'\nimport util from '../util'\nimport chalk from 'chalk'\n\n/**\n * Entry point of botpress\n *\n * It will do the following things:\n *\n * 1. Find botpress instance creator in `node_modules` folder in current project.\n * 2. Find the `botfile.js` which will be injected into the creator to create the instance.\n * 3. Start the botpress instance.\n */\nmodule.exports = function(projectPath, options) {\n  let Botpress = null\n\n  if (!projectPath || typeof(projectPath) !== 'string') {\n    projectPath = '.'\n  }\n\n  projectPath = path.resolve(projectPath)\n\n  try {\n    Botpress = require(path.join(projectPath, 'node_modules', 'botpress')).Botpress\n  } catch (err) {\n    util.print('error', err.message)\n    util.print('error', err.stack)\n    util.print('error', '(fatal) Could not load the local version of botpress')\n    util.print('Hint: 1) have you used `botpress init` to create a new bot the proper way?')\n    util.print('Hint: 2) Do you have read and write permissions on the current directory?')\n    util.print('-------------')\n    util.print('If none of the above works, this might be a bug in botpress. ' +\n      'Please contact the Botpress Team on gitter and provide the printed error above.')\n    process.exit(1)\n  }\n\n  const botfile = path.join(projectPath, 'botfile.js')\n  if (!fs.existsSync(botfile)) {\n    util.print('error', `(fatal) No ${chalk.bold('botfile.js')} file found at: ` + botfile)\n    process.exit(1)\n  }\n\n  const bot = new Botpress({ botfile })\n  bot.start()\n}\n"]}