{"version":3,"sources":["../src/listeners.js"],"names":["hear","conditions","callback","isPlainObject","text","event","next","pairs","toPairs","result","every","key","comparrer","eventValue","get","isFunction","isRegExp","test","isEqual","length","module","exports"],"mappings":";;;;AAAA;;;;;;AAEA,IAAMA,OAAO,SAAPA,IAAO,CAASC,UAAT,EAAqBC,QAArB,EAA+B;AAC1C,MAAI,CAAC,iBAAEC,aAAF,CAAgBF,UAAhB,CAAL,EAAkC;AAChCA,iBAAa,EAAEG,MAAMH,UAAR,EAAb;AACD;;AAED,SAAO,UAACI,KAAD,EAAQC,IAAR,EAAiB;AACtB,QAAMC,QAAQ,iBAAEC,OAAF,CAAUP,UAAV,CAAd;AACA,QAAMQ,SAAS,iBAAEC,KAAF,CAAQH,KAAR,EAAe,gBAAsB;AAAA;AAAA,UAApBI,GAAoB;AAAA,UAAfC,SAAe;;AAClD,UAAMC,aAAa,iBAAEC,GAAF,CAAMT,KAAN,EAAaM,GAAb,EAAkB,IAAlB,CAAnB;;AAEA,UAAI,iBAAEI,UAAF,CAAaH,SAAb,CAAJ,EAA6B;AAC3B,eAAOA,UAAUC,UAAV,EAAsBR,KAAtB,MAAiC,IAAxC;AACD,OAFD,MAEO,IAAI,iBAAEW,QAAF,CAAWJ,SAAX,CAAJ,EAA2B;AAChC,eAAOA,UAAUK,IAAV,CAAeJ,UAAf,CAAP;AACD,OAFM,MAEA;AACL,eAAO,iBAAEK,OAAF,CAAUN,SAAV,EAAqBC,UAArB,CAAP;AACD;AACF,KAVc,CAAf;;AAYA,QAAIJ,UAAU,iBAAEM,UAAF,CAAab,QAAb,CAAd,EAAsC;AACpC,UAAIA,SAASiB,MAAT,IAAmB,CAAvB,EAA0B;AACxB,YAAI,iBAAEJ,UAAF,CAAaT,IAAb,CAAJ,EAAwB;AACtBA;AACD;AACDJ,iBAASG,KAAT;AACD,OALD,MAKO;AACLH,iBAASG,KAAT,EAAgBC,IAAhB;AACD;AACF,KATD,MASO;AACL,UAAI,iBAAES,UAAF,CAAaT,IAAb,CAAJ,EAAwB;AACtBA;AACD;AACF;AACF,GA5BD;AA6BD,CAlCD;;AAoCAc,OAAOC,OAAP,GAAiB,EAAErB,UAAF,EAAjB","file":"listeners.js","sourcesContent":["import _ from 'lodash'\n\nconst hear = function(conditions, callback) {\n  if (!_.isPlainObject(conditions)) {\n    conditions = { text: conditions }\n  }\n\n  return (event, next) => {\n    const pairs = _.toPairs(conditions)\n    const result = _.every(pairs, ([key, comparrer]) => {\n      const eventValue = _.get(event, key, null)\n\n      if (_.isFunction(comparrer)) {\n        return comparrer(eventValue, event) === true\n      } else if (_.isRegExp(comparrer)) {\n        return comparrer.test(eventValue)\n      } else {\n        return _.isEqual(comparrer, eventValue)\n      }      \n    })\n\n    if (result && _.isFunction(callback)) {\n      if (callback.length <= 1) {\n        if (_.isFunction(next)) { \n          next()\n        }\n        callback(event)\n      } else {\n        callback(event, next)\n      }\n    } else {\n      if (_.isFunction(next)) { \n        next()\n      }\n    }\n  }\n}\n\nmodule.exports = { hear }\n"]}